---
import Home from "../layouts/HomeLayout.astro";

// import BaseHead from '../components/BaseHead.astro';
// import Header from '../components/Header.astro';
// import Footer from '../components/Footer.astro';
// import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
// import type { BlogInfo } from '../interfaces/blog-info';
// import fetchApi from '../lib/strapi';
// import Hero from '../components/home/Hero.astro';
// import type StrapiNavigation from '../interfaces/navigation';
// import type Category from '../interfaces/category';
// import ArticleList from '../components/ArticleList.astro';
// import NewsLetter from '../components/NewsLetter.astro';
// import type Article from '../interfaces/article';
// import type Meta from '../interfaces/meta';
// import type { Tag } from '../interfaces/tag';

// const articlesResponse = await fetchApi<{data: Article[], meta: Meta}>({
//   endpoint: '/articles',
//   query: {
//     publicationState: 'live',
//     sort: ['publishedAt:desc'],
//     populate: {
//       author: {
//         fields: '*',
//         populate: '*',
//       },
//       mainImage: '*',
//       categories: '*',
//     },
//     pagination: {
//       page: 1,
//       pageSize: 3
//     }
//   },
// });

// const categories = await fetchApi<Category[]>({
//   endpoint: 'categories',
//   wrappedByKey: 'data',
//   query: {
//     sort: ['title:asc'],
//     pagination: {
//       page: 1,
//       pageSize: 5
//     }
//   }
// });

// await Promise.all(categories.map(cat => {
//   fetchApi<Meta>({
//   endpoint: '/articles',
//   wrappedByKey: 'meta',
//   query: {
//     publicationState: 'live',
//     filters: {
//       categories: {
//         id: {
//           $eq: cat.id
//         }
//       }
//     },
//     pagination: {
//       page: 1,
//       pageSize: 1
//     }
//   },
// }).then(res => {
//   cat.attributes.qtd = res.pagination.total;
// })
// }))

// const tags = await fetchApi<Tag[]>(
//   {
//     endpoint: 'tags',
//     wrappedByKey: 'data',
//     query: {
//       sort: ['name:asc'],
//     }
//   }
// );


// const blogInfo = await fetchApi<BlogInfo>({
//   endpoint: 'blog-info',
//   query: {
//     populate: '*',
//   }
// });

// const headerNavigation = await fetchApi<StrapiNavigation<Category>[]>({
//   endpoint: 'navigation/render/1',
// });
---

<Home/>
